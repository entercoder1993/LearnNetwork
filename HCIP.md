# 6、路由策略

## 6.1 概述

路由策略（Routing Policy）是一套用于对路由信息进行过滤、属性设置等操作的方法，通过对路由的控制，可以影响数据流量转发操作。

路由策略并非单一的技术或协议，而是一个技术专题或方法论，饱含着多种工具及方法。

路由策略的应用：

1. 网络设备在发布路由更新，或者接收路由更新时执行路由过滤。
2. 网络设备在执行路由重分发时，关联路由策略，只将特定的路由引入目标路由协议。
3. 针对不同的路由设置不同的路由属性（度量值、优先级、标记等）。

## 6.2 Route-Policy

Route-Policy是路由策略技术中一个重要的工具。它可以用来执行路由过滤，也可以用于修改路由的属性。

例：所示网络中存在两个动态路由协议——OSPF和RIP，R2处于两个域的边界，同时运行着OSPF和RIP。为了让R1学习到OSPF域中的路由，需要在R2上部署路由重分发，将OSPF路由引入RIP。默认情况下，会把所有的OSPF路由都引入到IRP中，如果希望R2只将特定的OSPF路由引入RIP，并且对引入后的路由设置不同的跳数，此时就可以在路由重分发的过程中应用Route-Policy。

![image-20220615171713526](https://raw.githubusercontent.com/entercoder1993/picture-bed/main/img/2022-06-15-17-17-13.png)

基本概念

Route-Policy就像拥有一个或多个节点的列表，每一个节点都可以是一系列条件语句及执行语句的集合，这些节点都按照编号从小到大顺序排列。

在Route-Policy被执行的时候，设备从编号最小的节点开始进行路由匹配，如果满足所有条件，就执行该节点下的执行语句，并且不会再继续往下一个节点进行匹配。

![image-20220615172129254](https://raw.githubusercontent.com/entercoder1993/picture-bed/main/img/2022-06-15-17-21-29.png)

> 一般考虑到扩展性，节点之间的序号会预留几个数，如果插入新的节点，则还有预留的序号可以使用。

基础配置

1、创建一个Route-Policy节点

**Route-policy** route-policy-name {**permit** | **deny**} **node** node

```
route-policy hcnp permit node 10
```

